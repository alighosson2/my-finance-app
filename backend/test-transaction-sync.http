### Test Transaction Sync - OBP Integration
### Make sure you have:
### 1. Valid JWT token (login first)
### 2. OBP bank connection established
### 3. At least one financial account created

@baseUrl = http://localhost:3000/api
@token = YOUR_JWT_TOKEN_HERE

### 1. Test OBP Connection
POST {{baseUrl}}/banks/sync/test
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "tokenId": 1
}

### 2. Sync Accounts from OBP (This should work already)
POST {{baseUrl}}/banks/sync/accounts
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "tokenId": 1
}

### 3. Get User's Financial Accounts (to find accountId)
GET {{baseUrl}}/accounts
Authorization: Bearer {{token}}

### 4. Sync Transactions for Specific Account (NEW - This is what we just enabled!)
POST {{baseUrl}}/banks/sync/transactions/1
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "limit": 20
}

### 5. Verify Transactions Were Synced
GET {{baseUrl}}/transactions
Authorization: Bearer {{token}}

### 6. Full Sync - Accounts + Transactions (NEW - Enhanced functionality!)
POST {{baseUrl}}/banks/sync/all
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "transactionLimit": 50
}

### 7. Check All Transactions After Full Sync
GET {{baseUrl}}/transactions?page=1&limit=50
Authorization: Bearer {{token}}

### 8. Search for OBP Imported Transactions
GET {{baseUrl}}/transactions/search?tags=imported,obp
Authorization: Bearer {{token}} 